<html>
<head>
<meta charset="utf8"></meta>
<script language="javascript">
function ajax_request(method, url, data = {}){
const xhr = new XMLHttpRequest();  
//const url = '/api/projects/';  
xhr.open(method, url, true);  
xhr.setRequestHeader('Content-Type', 'application/json');  
xhr.onreadystatechange = function() {  
    if (xhr.readyState === 4 && xhr.status === 200) {  
        console.log('Resource updated successfully:', xhr.responseText);  
        alert (xhr.responseText);
    }  
};  
//const data = JSON.stringify({ name: 'Name', url: 'URL', platform: '3', status: '4', description: '', date_create: '2025-12-07', date_update: '2025-12-07'});  
xhr.send(data);  

}

</script>
<style>
    body {font-family: Arial;}
    textarea {width: 400px; height:100px;}
    input {width: 400px;}
</style>
</head>
<body>

<h1>Список проектов</h1>
<table>
<tr> <th>id</th> <th>name</th> <th>url</th> <th>platform</th> <th>status</th> <th>description</th> <th>date_create</th> <th>date_update</th></tr>
{% for project in project_list %} <tr><td>{{ project.id }}</td> <td>{{ project.name }}</td> <td>{{ project.url }}</td> <td>{{ project.platform_name }}</td> <td>{{ project.status_name }}</td> <td>{{ project.description }}</td> <td>{{ project.date_create }}</td> <td>{{ project.date_update }}</td></tr> {% endfor %}
</table>
<a href="/" title="Refresh">Обновить</a>
<hr/>
<h3>Cоздание проекта</h3>
<textarea id="t1">{"name":"Name","url":"URL","platform":"3","status":"4","description":"","date_create":"2025-12-07","date_update":"2025-12-07"}</textarea><br/>
<button onclick="ajax_request('POST','/api/projects', document.getElementById('t1').value);">POST</button><br/>
<hr/>
<h3>Полный список проектов</h3>
<input type="text" value="/api/projects" id="i1" readonly="readonly"/><br/>
<button onclick="ajax_request('GET','/api/projects');">GET</button> <br/><hr/>
<h3>Получение проекта по ID</h3>
<input type="text" value="/api/projects/1" id="i2"/><br/>
<button onclick="ajax_request('GET', document.getElementById('i2').value);">GET</button> <br/><hr/>
<h3>Фильтрация по платформе</h3>
<input type="text" value="/api/projects?platform=WordPress" id="i3"/><br/>
<button onclick="ajax_request('GET', document.getElementById('i3').value);">GET</button> <br/><hr/>
<h3>Фильтрация по статусу</h3>
<input type="text" value="/api/projects?status=production" id="i4"/><br/>
<button onclick="ajax_request('GET', document.getElementById('i4').value);">GET</button> <br/><hr/>
<h3>Комбинированная фильтрация</h3>
<input type="text" value="/api/projects?platform=Bitrix&status=development" id="i5"/><br/>
<button onclick="ajax_request('GET', document.getElementById('i6').value);">GET</button> <br/><hr/>
<h3>Список проектов с пагинацией</h3>
<input type="text" value="/api/projects?page=1&limit=10" id="i6"/><br/>
<button onclick="ajax_request('GET',document.getElementById('i6').value);">GET</button> <br/><hr/>
<h3>Обновление проекта</h3>
<input type="text" value="/api/projects/1" id="i7"/><br/>
<button onclick="ajax_request('PUT','/api/projects/1');">PUT</button>  <br/><hr/>
<h3>Удаление проекта</h3>
<input type="text" value="/api/projects/1" id="i8"/><br/>
<button onclick="ajax_request('DELETE', document.getElementById('i8').value);">DELETE</button><br/><hr/>
</body>
</html>